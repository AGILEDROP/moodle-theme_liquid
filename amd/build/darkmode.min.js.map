{"version":3,"file":"darkmode.min.js","sources":["../src/darkmode.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Liquid.\n *\n * @copyright  2023 Agiledrop ltd.\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const init = () => {\n  const darkThemeMq = window.matchMedia(\"(prefers-color-scheme: dark)\");\n\n  if (darkThemeMq.matches && localStorage.getItem(\"darkThemeEnabled\") === null) {\n    localStorage.setItem(\"darkThemeEnabled\", \"1\");\n  }\n\n  const darkThemeToggle = document.getElementById(\"darktheme-checkbox\");\n  const storedDarkThemeSetting = localStorage.getItem(\"darkThemeEnabled\");\n\n  const setTheme = (theme) => {\n    document.documentElement.setAttribute('data-bs-theme', theme);\n  };\n\n  if (storedDarkThemeSetting === null) {\n    localStorage.setItem(\"darkThemeEnabled\", \"0\");\n    darkThemeToggle.checked = false;\n    setTheme('light');\n  } else {\n    darkThemeToggle.checked = storedDarkThemeSetting === \"1\";\n    setTheme(darkThemeToggle.checked ? 'dark' : 'light');\n  }\n\n  darkThemeToggle.addEventListener(\"change\", (e) => {\n    const isDarkThemeEnabled = e.target.checked;\n\n    setTheme(isDarkThemeEnabled ? 'dark' : 'light');\n    localStorage.setItem(\"darkThemeEnabled\", isDarkThemeEnabled ? \"1\" : \"0\");\n  });\n};\n"],"names":["window","matchMedia","matches","localStorage","getItem","setItem","darkThemeToggle","document","getElementById","storedDarkThemeSetting","setTheme","theme","documentElement","setAttribute","checked","addEventListener","e","isDarkThemeEnabled","target"],"mappings":"0JAsBoB,KACEA,OAAOC,WAAW,gCAEtBC,SAAwD,OAA7CC,aAAaC,QAAQ,qBAC9CD,aAAaE,QAAQ,mBAAoB,WAGrCC,gBAAkBC,SAASC,eAAe,sBAC1CC,uBAAyBN,aAAaC,QAAQ,oBAE9CM,SAAYC,QAChBJ,SAASK,gBAAgBC,aAAa,gBAAiBF,QAG1B,OAA3BF,wBACFN,aAAaE,QAAQ,mBAAoB,KACzCC,gBAAgBQ,SAAU,EAC1BJ,SAAS,WAETJ,gBAAgBQ,QAAqC,MAA3BL,uBAC1BC,SAASJ,gBAAgBQ,QAAU,OAAS,UAG9CR,gBAAgBS,iBAAiB,UAAWC,UACpCC,mBAAqBD,EAAEE,OAAOJ,QAEpCJ,SAASO,mBAAqB,OAAS,SACvCd,aAAaE,QAAQ,mBAAoBY,mBAAqB,IAAM"}