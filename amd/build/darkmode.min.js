define("theme_liquid/darkmode",["exports","core_user/repository"],(function(_exports,_repository){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;
/**
   * Darkmode functionality for theme Liquid.
   *
   * @module     theme_liquid/darkmode
   * @copyright  2025 Agiledrop ltd.
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const darkThemeMq=window.matchMedia("(prefers-color-scheme: dark)"),darkThemeToggle=document.querySelectorAll(".darktheme-checkbox"),setTheme=theme=>{document.documentElement.setAttribute("data-bs-theme",theme)},setCookie=(name,value)=>{document.cookie="".concat(name,"=").concat(value,"; path=/; SameSite=None; Secure"),(0,_repository.setUserPreference)("theme-dark-mode","0"===value?"light":"dark")},handleCheckboxChange=e=>{const isDarkThemeEnabled=e.target.checked;setTheme(isDarkThemeEnabled?"dark":"light"),setCookie("darkThemeEnabled",isDarkThemeEnabled?"1":"0"),updateCheckboxes(isDarkThemeEnabled)},updateCheckboxes=checked=>{darkThemeToggle.forEach((function(checkbox){checkbox.checked=checked}))},initializeTheme=async()=>{const storedDarkThemeSetting=await(async name=>{let cookie=null;const parts="; ".concat(document.cookie).split("; ".concat(name,"="));2===parts.length&&(cookie=parts.pop().split(";").shift());const userPreference=await(0,_repository.getUserPreference)("theme-dark-mode");return null!==userPreference&&(cookie="dark"===userPreference?"1":"0"),cookie})("darkThemeEnabled");if(null===storedDarkThemeSetting)setCookie("darkThemeEnabled",darkThemeMq.matches?"1":"0"),updateCheckboxes(darkThemeMq.matches),setTheme(darkThemeMq.matches?"dark":"light");else{const isDarkTheme="1"===storedDarkThemeSetting;updateCheckboxes(isDarkTheme),setTheme(isDarkTheme?"dark":"light")}};_exports.init=()=>{darkThemeToggle.forEach((function(checkbox){checkbox.addEventListener("change",handleCheckboxChange)})),initializeTheme()}}));

//# sourceMappingURL=darkmode.min.js.map